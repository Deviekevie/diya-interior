import{a as e,j as o,d as v,u as w,r as s,F as u,b as f}from"./index-56a6ab6e.js";const A=({images:g,refresh:n})=>{const p=async t=>{var l,h;if(window.confirm("Are you sure you want to delete this image?"))try{const a=await v(t);a.success?n():alert("Failed to delete image: "+(a.message||"Unknown error"))}catch(a){alert("Failed to delete image: "+(((h=(l=a.response)==null?void 0:l.data)==null?void 0:h.message)||"Please try again")),console.error("Delete error:",a)}};return e("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"16px",marginTop:"30px"},children:g.map(t=>o("div",{style:{position:"relative",borderRadius:"8px",overflow:"hidden",boxShadow:"0 4px 10px rgba(0,0,0,0.1)",background:"#fff"},children:[e("img",{src:t.optimizedUrl||t.imageUrl,alt:t.title||t.description||"Gallery Image",style:{width:"100%",height:"200px",objectFit:"cover"}}),e("button",{onClick:()=>p(t._id),style:{position:"absolute",top:"8px",right:"8px",background:"red",color:"#fff",border:"none",borderRadius:"50%",width:"30px",height:"30px",cursor:"pointer",fontWeight:"bold"},children:"Ã—"}),o("div",{style:{padding:"8px 10px",fontSize:"14px",color:"#333",borderTop:"1px solid #eee"},children:[t.title&&e("div",{style:{fontWeight:"600",marginBottom:"4px"},children:t.title}),t.category&&o("div",{style:{fontSize:"12px",color:"#666",marginBottom:"4px"},children:["Category: ",t.category]}),t.description&&e("div",{style:{fontSize:"12px",color:"#666"},children:t.description})]})]},t._id))})},S=()=>{const g=w(),[n,p]=s.useState([]),[t,l]=s.useState([]),[h,a]=s.useState(!0),[i,y]=s.useState("queries"),m=async()=>{try{const r=await f.get("/contact");p(Array.isArray(r.data)?r.data:r.data.contacts||[])}catch(r){console.error(r),p([])}},x=async()=>{try{const r=await f.get("/gallery",{params:{limit:50}});l(r.data.images||[])}catch(r){console.error(r),l([])}},b=()=>{x()};return s.useEffect(()=>{(async()=>{a(!0),await Promise.all([m(),x()]),a(!1)})()},[]),h?e("p",{style:{padding:"50px",textAlign:"center"},children:"Loading..."}):o("div",{style:{padding:"40px",maxWidth:"1400px",margin:"0 auto"},children:[o("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"30px"},children:[e("h1",{children:"Admin Dashboard"}),e("button",{style:{padding:"10px 20px",borderRadius:"6px",background:"#470068ff",color:"#fff",cursor:"pointer",border:"none",fontWeight:"600"},onClick:()=>g("/admin/gallery-upload"),children:"+ Upload Image"})]}),o("div",{style:{display:"flex",gap:"10px",marginBottom:"30px",borderBottom:"2px solid #e5e7eb"},children:[o("button",{onClick:()=>y("queries"),style:{padding:"12px 24px",background:"transparent",border:"none",borderBottom:i==="queries"?"3px solid #470068ff":"3px solid transparent",color:i==="queries"?"#470068ff":"#666",cursor:"pointer",fontWeight:i==="queries"?"600":"400",transition:"all 0.2s"},children:["Contact Queries (",n.length,")"]}),o("button",{onClick:()=>y("gallery"),style:{padding:"12px 24px",background:"transparent",border:"none",borderBottom:i==="gallery"?"3px solid #470068ff":"3px solid transparent",color:i==="gallery"?"#470068ff":"#666",cursor:"pointer",fontWeight:i==="gallery"?"600":"400",transition:"all 0.2s"},children:["Gallery (",t.length,")"]})]}),i==="queries"?e(u,{children:n.length===0?e("p",{style:{marginTop:"20px",color:"#666"},children:"No queries yet."}):e("div",{style:{overflowX:"auto"},children:o("table",{style:{width:"100%",borderCollapse:"collapse",background:"#fff",borderRadius:"8px",overflow:"hidden",boxShadow:"0 2px 8px rgba(0,0,0,0.1)"},children:[e("thead",{children:o("tr",{children:[e("th",{style:d,children:"Name"}),e("th",{style:d,children:"Email"}),e("th",{style:d,children:"Phone"}),e("th",{style:d,children:"Message"}),e("th",{style:d,children:"Date"})]})}),e("tbody",{children:n.map(r=>o("tr",{children:[e("td",{style:c,children:r.name}),e("td",{style:c,children:r.email}),e("td",{style:c,children:r.phone||"N/A"}),e("td",{style:c,children:r.message}),e("td",{style:c,children:r.createdAt?new Date(r.createdAt).toLocaleDateString():"N/A"})]},r._id))})]})})}):e(u,{children:t.length===0?e("p",{style:{marginTop:"20px",color:"#666"},children:"No images uploaded yet."}):e(A,{images:t,refresh:b})})]})},d={border:"1px solid #ccc",padding:"8px",background:"#f0f0f0",textAlign:"left"},c={border:"1px solid #ccc",padding:"8px"};export{S as default};
