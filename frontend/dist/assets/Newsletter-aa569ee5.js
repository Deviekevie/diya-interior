import{r as i,a as e,j as a,g as T,c as k}from"./index-e5660d22.js";const P=[{id:"static-1",name:"Priya S.",rating:5,message:"Exceptional service! The design was exactly what we imagined. Timely delivery and great professionalism."},{id:"static-2",name:"Naveen K.",rating:5,message:"Diya Modular transformed our home beautifully. High-quality materials and a very friendly team."},{id:"static-3",name:"Anusha R.",rating:5,message:"Amazing experience! They understood our needs perfectly. Highly recommended for modular interiors."}],q=()=>{const[M,l]=i.useState([]),[A,m]=i.useState(!0),[u,v]=i.useState(""),[o,h]=i.useState(""),[w,g]=i.useState(5),[c,y]=i.useState(""),[f,p]=i.useState(!1),[b,N]=i.useState(""),[S,n]=i.useState("");i.useEffect(()=>{(async()=>{try{m(!0),v("");const t=await T();l(Array.isArray(t)?t:[])}catch(t){console.error("Failed to load reviews:",t),v("Unable to load recent reviews right now."),l([])}finally{m(!1)}})()},[]);const D=async r=>{var x,F;if(r.preventDefault(),n(""),N(""),!o.trim()||!c.trim()){n("Please enter your name and review message.");return}const t=Number(w);if(!Number.isFinite(t)||t<1||t>5){n("Please select a rating between 1 and 5 stars.");return}try{p(!0);const s=await k({name:o.trim(),rating:t,message:c.trim()});s.success&&s.review?(l(d=>[s.review,...d]),N("Thank you for your review!"),h(""),g(5),y("")):n(s.message||"Failed to submit review. Please try again.")}catch(s){console.error("Submit review error:",s);const d=((F=(x=s==null?void 0:s.response)==null?void 0:x.data)==null?void 0:F.message)||"Failed to submit review. Please try again.";n(d)}finally{p(!1)}},E=r=>{const t=Math.round(Number(r)||0);return"⭐ ".repeat(t||0).trim()},R=[...M,...P];return e("div",{className:"container",children:a("div",{className:"review-wrapper",children:[a("h1",{children:["What our",e("br",{}),e("span",{className:"yellow",children:"customers say"})]}),e("div",{className:"review-intro",children:"Real experiences from clients who trusted Diya Modular for their dream interiors."}),a("form",{className:"review-form",onSubmit:D,noValidate:!0,children:[S&&e("div",{className:"review-alert review-alert-error",children:S}),b&&e("div",{className:"review-alert review-alert-success",children:b}),a("div",{className:"review-form-row",children:[a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-name",children:"Name"}),e("input",{id:"review-name",type:"text",value:o,onChange:r=>h(r.target.value),placeholder:"Your name",required:!0})]}),a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-rating",children:"Rating"}),a("select",{id:"review-rating",value:w,onChange:r=>g(r.target.value),children:[e("option",{value:5,children:"⭐⭐⭐⭐⭐"}),e("option",{value:4,children:"⭐⭐⭐⭐"}),e("option",{value:3,children:"⭐⭐⭐"}),e("option",{value:2,children:"⭐⭐"}),e("option",{value:1,children:"⭐"})]})]})]}),a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-message",children:"Review"}),e("textarea",{id:"review-message",value:c,onChange:r=>y(r.target.value),placeholder:"Share your experience with Diya Modular",rows:3,required:!0})]}),e("button",{type:"submit",disabled:f,children:f?"Submitting...":"Submit Review"})]}),u&&e("p",{style:{marginTop:"1rem",color:"#b91c1c",fontSize:"0.9rem"},children:u}),a("div",{className:"review-cards",children:[A&&R.length===0&&a("div",{className:"review-card",children:[e("div",{className:"review-skeleton-line"}),e("div",{className:"review-skeleton-line short"}),e("div",{className:"review-skeleton-line"})]}),R.map(r=>a("div",{className:"review-card",children:[e("h3",{children:E(r.rating||5)}),a("div",{className:"review-text",children:["“",r.message,"”"]}),a("span",{children:["- ",r.name]}),r.createdAt&&e("small",{style:{display:"block",marginTop:"0.5rem",color:"#777"},children:new Date(r.createdAt).toLocaleDateString()})]},r._id||r.id))]})]})})};export{q as N};
