import{r as i,a as e,j as a,g as T,c as k}from"./index-b95dafdc.js";const P=[{id:"static-1",name:"Priya S.",rating:5,message:"Exceptional service! The design was exactly what we imagined. Timely delivery and great professionalism."},{id:"static-2",name:"Naveen K.",rating:5,message:"Diya Modular transformed our home beautifully. High-quality materials and a very friendly team."},{id:"static-3",name:"Anusha R.",rating:5,message:"Amazing experience! They understood our needs perfectly. Highly recommended for modular interiors."}],q=()=>{const[M,o]=i.useState([]),[A,u]=i.useState(!0),[v,h]=i.useState(""),[c,w]=i.useState(""),[g,y]=i.useState(5),[d,f]=i.useState(""),[p,b]=i.useState(!1),[N,S]=i.useState(""),[R,n]=i.useState("");i.useEffect(()=>{(async()=>{try{u(!0),h("");const t=await T(),l=Array.isArray(t.reviews)?t.reviews:[];o(l)}catch(t){console.error("Failed to load reviews:",t),h("Unable to load recent reviews right now."),o([])}finally{u(!1)}})()},[]);const D=async r=>{var l,F;if(r.preventDefault(),n(""),S(""),!c.trim()||!d.trim()){n("Please enter your name and review message.");return}const t=Number(g);if(!Number.isFinite(t)||t<1||t>5){n("Please select a rating between 1 and 5 stars.");return}try{b(!0);const s=await k({name:c.trim(),rating:t,message:d.trim()});s.success&&s.review?(o(m=>[s.review,...m]),S("Thank you for your review!"),w(""),y(5),f("")):n(s.message||"Failed to submit review. Please try again.")}catch(s){console.error("Submit review error:",s);const m=((F=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:F.message)||"Failed to submit review. Please try again.";n(m)}finally{b(!1)}},E=r=>{const t=Math.round(Number(r)||0);return"⭐ ".repeat(t||0).trim()},x=[...M,...P];return e("div",{className:"container",children:a("div",{className:"review-wrapper",children:[a("h1",{children:["What our",e("br",{}),e("span",{className:"yellow",children:"customers say"})]}),e("div",{className:"review-intro",children:"Real experiences from clients who trusted Diya Modular for their dream interiors."}),a("form",{className:"review-form",onSubmit:D,noValidate:!0,children:[R&&e("div",{className:"review-alert review-alert-error",children:R}),N&&e("div",{className:"review-alert review-alert-success",children:N}),a("div",{className:"review-form-row",children:[a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-name",children:"Name"}),e("input",{id:"review-name",type:"text",value:c,onChange:r=>w(r.target.value),placeholder:"Your name",required:!0})]}),a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-rating",children:"Rating"}),a("select",{id:"review-rating",value:g,onChange:r=>y(r.target.value),children:[e("option",{value:5,children:"⭐⭐⭐⭐⭐"}),e("option",{value:4,children:"⭐⭐⭐⭐"}),e("option",{value:3,children:"⭐⭐⭐"}),e("option",{value:2,children:"⭐⭐"}),e("option",{value:1,children:"⭐"})]})]})]}),a("div",{className:"review-form-field",children:[e("label",{htmlFor:"review-message",children:"Review"}),e("textarea",{id:"review-message",value:d,onChange:r=>f(r.target.value),placeholder:"Share your experience with Diya Modular",rows:3,required:!0})]}),e("button",{type:"submit",disabled:p,children:p?"Submitting...":"Submit Review"})]}),v&&e("p",{style:{marginTop:"1rem",color:"#b91c1c",fontSize:"0.9rem"},children:v}),a("div",{className:"review-cards",children:[A&&x.length===0&&a("div",{className:"review-card",children:[e("div",{className:"review-skeleton-line"}),e("div",{className:"review-skeleton-line short"}),e("div",{className:"review-skeleton-line"})]}),x.map(r=>a("div",{className:"review-card",children:[e("h3",{children:E(r.rating||5)}),a("div",{className:"review-text",children:["“",r.message,"”"]}),a("span",{children:["- ",r.name]}),r.createdAt&&e("small",{style:{display:"block",marginTop:"0.5rem",color:"#777"},children:new Date(r.createdAt).toLocaleDateString()})]},r._id||r.id))]})]})})};export{q as N};
